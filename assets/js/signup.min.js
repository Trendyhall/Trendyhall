document.addEventListener("DOMContentLoaded",()=>{function e(e){e.preventDefault(),e.stopPropagation();let t=document.signup.phone1;/\+7\d{10}|8\d{10}/.test(t.value)&("8"==t.value[0]&11==t.value.length|"+"==t.value[0]&12==t.value.length)?(console.log("Succes"),document.getElementById("vercodeInput").removeAttribute("style"),t.classList.add("is-valid"),t.classList.remove("is-invalid")):(t.classList.add("is-invalid"),t.classList.remove("is-valid"))}!function(){document.getElementById("vercodeBtn").onclick=e;[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(e){return new bootstrap.Tooltip(e)});(function(){let e=document.signup;e.firstname.oninput=(()=>{let t=e.firstname;if(t.parentNode.classList.add("was-validated"),/[^a-zA-Zа-яА-Я]/.test(t.value)){let e=t.selectionStart-1;t.value=t.value.replace(/[^a-zA-Zа-яА-Я]/g,""),t.setSelectionRange(e,e)}}),e.secondname.oninput=(()=>{let t=e.secondname;if(t.parentNode.classList.add("was-validated"),/[^a-zA-Zа-яА-Я]/.test(t.value)){let e=t.selectionStart-1;t.value=t.value.replace(/[^a-zA-Zа-яА-Я]/g,""),t.setSelectionRange(e,e)}}),e.patronymic.oninput=(()=>{let t=e.patronymic;if(/[^a-zA-Zа-яА-Я]/.test(t.value)){let e=t.selectionStart-1;t.value=t.value.replace(/[^a-zA-Zа-яА-Я]/g,""),t.setSelectionRange(e,e)}}),e.passcode.oninput=(()=>{let t=e.passcode;t.value=t.value.replace(/[^0-9]/g,""),t.value.length>6&&(t.value=t.value.substring(0,6)),6==t.value.length?(t.classList.add("is-valid"),t.classList.remove("is-invalid")):(t.classList.add("is-invalid"),t.classList.remove("is-valid"))});let t=e.phone1.value;e.phone1.oninput=(()=>{let a=e.phone1;if(/[^0-9+]/.test(a.value)){let e=a.selectionStart-1;a.value=a.value.replace(/[^0-9+]/g,""),a.setSelectionRange(e,e)}"+"==a.value[0]?a.value.length<=12&&(t=a.value):a.value.length<=11&&(t=a.value),a.value=t;/\+7\d{10}|8\d{10}/.test(a.value)&("8"==a.value[0]&11==a.value.length|"+"==a.value[0]&12==a.value.length)?(a.classList.add("is-valid"),a.classList.remove("is-invalid")):(a.classList.add("is-invalid"),a.classList.remove("is-valid"))});e.password1.value;e.password1.oninput=(()=>{let a=e.password1;if(/[^0-9a-zA-Zа-яА-Я_]/.test(a.value)){let e=a.selectionStart-1;a.value=a.value.replace(/[^0-9a-zA-Zа-яА-Я_]/g,""),a.setSelectionRange(e,e)}a.value.length<=16&&(t=a.value),a.value=t;/[0-9a-zA-Zа-яА-Я_]{6,16}/.test(a.value)&a.value.length>=6&a.value.length<=16?(a.classList.add("is-valid"),a.classList.remove("is-invalid")):(a.classList.add("is-invalid"),a.classList.remove("is-valid"))})})(),document.signup.accept.onclick=(()=>{document.signup.accept.checked?document.getElementById("submitBtn").removeAttribute("disabled"):document.getElementById("submitBtn").setAttribute("disabled","")}),document.signup.addEventListener("submit",e=>{let t=document.signup;e.preventDefault(),e.stopPropagation(),/[a-zA-Zа-яА-Я]/.test(t.firstname.value)&/[a-zA-Zа-яА-Я]/.test(t.secondname.value)&&/\+7\d{10}|8\d{10}/.test(t.phone1.value)&("8"==t.phone1.value[0]&11==t.phone1.value.length|"+"==t.phone1.value[0]&12==t.phone1.value.length)&&/[0-9a-zA-Zа-яА-Я_]/.test(t.password1.value)&t.password1.value.length>=6&t.password1.value.length<=16&&6==t.passcode.value.length&&function e(){let t=uuidv4();let a=document.signup;fetch("/user/exsist",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({phone:a.phone1.value})}).then(e=>{if(e.ok)return e.text()}).then(l=>{if(console.log(l),0==l){let e=localStorage.getItem("cart");null==e&&(e="{}"),a.rememberme1.checked?setCookie("user-id",t,{"max-age":864e3}):setCookie("user-id",t),function(e,t,a,l,s,n,i){fetch("/user/signup",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({uuid:e,name:t,password:n,patronymic:l,phone:s,secondname:a,cart:i})}).then(e=>{window.location.replace("/")})}(t,a.firstname.value,a.secondname.value,a.patronymic.value,a.phone1.value,a.password1.value,e)}else e()})}()})}()});