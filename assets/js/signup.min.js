document.addEventListener("DOMContentLoaded",()=>{function e(e){e.preventDefault(),e.stopPropagation();let a=document.signup.phone1;/\+7\d{10}|8\d{10}/.test(a.value)&("8"==a.value[0]&11==a.value.length|"+"==a.value[0]&12==a.value.length)?(console.log("Succes"),document.getElementById("vercodeInput").removeAttribute("style"),a.classList.add("is-valid"),a.classList.remove("is-invalid")):(a.classList.add("is-invalid"),a.classList.remove("is-valid"))}!function(){document.getElementById("vercodeBtn").onclick=e;[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(e){return new bootstrap.Tooltip(e)});(function(){let e=document.signup;e.firstname.oninput=(()=>{let a=e.firstname;if(a.parentNode.classList.add("was-validated"),/[^a-zA-Zа-яА-Я]/.test(a.value)){let e=a.selectionStart-1;a.value=a.value.replace(/[^a-zA-Zа-яА-Я]/g,""),a.setSelectionRange(e,e)}}),e.secondname.oninput=(()=>{let a=e.secondname;if(a.parentNode.classList.add("was-validated"),/[^a-zA-Zа-яА-Я]/.test(a.value)){let e=a.selectionStart-1;a.value=a.value.replace(/[^a-zA-Zа-яА-Я]/g,""),a.setSelectionRange(e,e)}}),e.patronymic.oninput=(()=>{let a=e.patronymic;if(/[^a-zA-Zа-яА-Я]/.test(a.value)){let e=a.selectionStart-1;a.value=a.value.replace(/[^a-zA-Zа-яА-Я]/g,""),a.setSelectionRange(e,e)}}),e.passcode.oninput=(()=>{let a=e.passcode;a.value=a.value.replace(/[^0-9]/g,""),a.value.length>6&&(a.value=a.value.substring(0,6)),6==a.value.length?(a.classList.add("is-valid"),a.classList.remove("is-invalid")):(a.classList.add("is-invalid"),a.classList.remove("is-valid"))});let a=e.phone1.value;e.phone1.oninput=(()=>{let t=e.phone1;if(/[^0-9+]/.test(t.value)){let e=t.selectionStart-1;t.value=t.value.replace(/[^0-9+]/g,""),t.setSelectionRange(e,e)}"+"==t.value[0]?t.value.length<=12&&(a=t.value):t.value.length<=11&&(a=t.value),t.value=a;/\+7\d{10}|8\d{10}/.test(t.value)&("8"==t.value[0]&11==t.value.length|"+"==t.value[0]&12==t.value.length)?(t.classList.add("is-valid"),t.classList.remove("is-invalid")):(t.classList.add("is-invalid"),t.classList.remove("is-valid"))});e.password1.value;e.password1.oninput=(()=>{let t=e.password1;if(/[^0-9a-zA-Zа-яА-Я_]/.test(t.value)){let e=t.selectionStart-1;t.value=t.value.replace(/[^0-9a-zA-Zа-яА-Я_]/g,""),t.setSelectionRange(e,e)}t.value.length<=16&&(a=t.value),t.value=a;/[0-9a-zA-Zа-яА-Я_]{6,16}/.test(t.value)&t.value.length>=6&t.value.length<=16?(t.classList.add("is-valid"),t.classList.remove("is-invalid")):(t.classList.add("is-invalid"),t.classList.remove("is-valid"))})})(),document.signup.accept.onclick=(()=>{document.signup.accept.checked?document.getElementById("submitBtn").removeAttribute("disabled"):document.getElementById("submitBtn").setAttribute("disabled","")}),document.signup.addEventListener("submit",e=>{let a=document.signup;e.preventDefault(),e.stopPropagation(),/[a-zA-Zа-яА-Я]/.test(a.firstname.value)&/[a-zA-Zа-яА-Я]/.test(a.secondname.value)&&/\+7\d{10}|8\d{10}/.test(a.phone1.value)&("8"==a.phone1.value[0]&11==a.phone1.value.length|"+"==a.phone1.value[0]&12==a.phone1.value.length)&&/[0-9a-zA-Zа-яА-Я_]/.test(a.password1.value)&a.password1.value.length>=6&a.password1.value.length<=16&&6==a.passcode.value.length&&function e(){let a=uuidv4();let t=document.signup;const l=firebase.database().ref();l.child("Users").child(a).get().then(l=>{l.exists()?e():(t.rememberme1.checked?setCookie("user-id",a,{"max-age":864e3}):setCookie("user-id",a),function(e,a,t,l,s,n){firebase.database().ref("Phones/").child(s).child(n).set(e),firebase.database().ref("Users/"+e+"/Data").set({Name:a,Password:n,Patronymic:l,Phone:s,Secondname:t})}(a,t.firstname.value,t.secondname.value,t.patronymic.value,t.phone1.value,t.password1.value),window.location.replace("/"))}).catch(e=>{console.error(e)})}()})}()});